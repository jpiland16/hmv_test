<html>
    <head>
        <title>HMV landing page</title>

        <script>

            const SITE = "https://hmv-test.herokuapp.com/";

            function loadSite() {
                window.setInterval(dotDot, 1000);
                new Promise((myResolve, myReject) => {
                    const x = new XMLHttpRequest();
                    x.onload = () => myResolve();
                    x.onerror = (error) => myReject(error);
                    x.open("GET", `https://api.allorigins.win/get?url=` + encodeURIComponent(SITE));
                    x.send();
                }).then((response) => window.location.href = SITE, (err) => {
                    window.clearInterval(dotDot);
                    console.log(err);
                    document.getElementById("log").innerText = "There was an error loading the page. Check the console (or refresh this page to try again)."
                });
            }

            function dotDot() {
                var el = document.getElementById("log");
                el.innerText = el.innerText + ".";
            }

        </script>

        <style>
            body {
                text-align: center;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            }

            h1 {
                font-weight: bold;
            }
        </style>

    </head>

    <body onload="loadSite()">
        <br/><br/>
        <br/><br/>
        <h1>Thanks for visiting my website!</h1><br/>
        <h2>Unfortunately, my <a href ="https://hmv-test.herokuapp.com/">Heroku site</a> might be asleep,
            so this website is currently checking to make sure it is awake.</h2>
        <br/><br/>
        <h3>You should be redirected shortly.</h3>
        <br/><br/>
        <br/><br/>
        <h4 id="log"></h4>

    </body>

</html>