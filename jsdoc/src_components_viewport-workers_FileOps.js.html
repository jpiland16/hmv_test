<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: src/components/viewport-workers/FileOps.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: src/components/viewport-workers/FileOps.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// Does not need to check for a mapping from filename to metadata in the current scheme, so it always
// just rubber stamps the file. May be changed later based on other criterion.
export function isFileNameValid(props, fname) {
    return true;
    // return props.fileMap[0] &amp;&amp; Object.getOwnPropertyNames(props.fileMap[0]).indexOf(fname) >= 0
}

export function clickFile(props, id, name) {
    if(isFileNameValid(props, id)) {
        onSelectFileChange(props, id, name);
        // window.history.replaceState(null, null, "?file=" + id);
    }
}

/**
 * Performs all necessary cleanup in order to switch which file is currently being
 * viewed by the user in the Viewport.
 * @param {Object} props An Object containing the following:
 * 
 * - props.data: a React reference whose 'current' field can be set to an empty list.
 * 
 * - props.setTimeSliderValue(): a function to set the target datapoint in the new dataset.
 * 
 * - props.lineNumberRef: a React reference whose 'current' is the index of the target datapoint.
 * 
 * - props.setSelectedFile(): A function to set the filepath of the currently selected file.
 * 
 * - props.subscribeToFile(): A function that notifies the server that we are viewing a specified file.
 * 
 * @param {String} mySelectedFile The filepath of the target file, as described by the server in the response 
 * of a '/get-file-list' GET request.
 * @param {String} myDisplayName The file's display name
 */
export function onSelectFileChange(props, mySelectedFile, myDisplayName) {
    // IMPORTANT! This method should only be called if mySelectedFile 
    // has been VERIFIED as a valid file, or if we need to clear/reset the model. (i.e. mySelectedFile === "")
    // (TODO: unsubscribe from current file)
    props.data.current = [];
    props.setTimeSliderValue(0);
    props.lineNumberRef.current = 0;
    console.log("Selected file has been changed to " + mySelectedFile + " (re-printed below)");
    console.log(mySelectedFile);
    console.log("Display name: " + myDisplayName);
    props.setSelectedFile({ fileName: mySelectedFile, displayName: myDisplayName }); // We may want some verification, but verification is also done by this method.
    props.subscribeToFile(props, mySelectedFile);
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Tutorials</h3><ul><li><a href="tutorial-https-guide.html">https-guide</a></li><li><a href="tutorial-local-server-https-guide.html">local-server-https-guide</a></li></ul><h3>Global</h3><ul><li><a href="global.html#getDirStructure">getDirStructure</a></li><li><a href="global.html#getFileDisplayName">getFileDisplayName</a></li><li><a href="global.html#getFileList">getFileList</a></li><li><a href="global.html#initializeScene">initializeScene</a></li><li><a href="global.html#isValidDir">isValidDir</a></li><li><a href="global.html#onSelectFileChange">onSelectFileChange</a></li><li><a href="global.html#scanAllFiles">scanAllFiles</a></li><li><a href="global.html#subscribeToFile">subscribeToFile</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Wed Jul 14 2021 15:42:58 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
